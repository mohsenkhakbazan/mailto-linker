services:
  mailto-linker:
    build: .
    container_name: mailto-linker
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - PORT=3000
      - PUBLIC_BASE_URL=${PUBLIC_BASE_URL}
      - SQLITE_PATH=/data/links.db

      - RATE_LIMIT_WINDOW_MS=60000
      - RATE_LIMIT_MAX=30

      - MAX_SUBJECT_CHARS=200
      - MAX_BODY_CHARS=10000
      - MAX_TO_RECIPIENTS=100
      - MAX_CC_RECIPIENTS=100

      - CLEANUP_INTERVAL_MINUTES=1440

      # Optional (recommended for public servers)
      - CREATE_API_KEY=${CREATE_API_KEY}

      
      - MAX_TOTAL_LINKS=${MAX_TOTAL_LINKS}
      - IP_DAILY_LIMIT=${IP_DAILY_LIMIT}
    ports:
      - "3000:3000"
    volumes:
      - mailto_linker_data:/data

volumes:
  mailto_linker_data:
